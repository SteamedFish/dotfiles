---
name: receiving-code-review
description: Use when receiving code review feedback, before implementing suggestions, especially if feedback seems unclear or technically questionable - requires technical rigor and verification, not performative agreement or blind implementation
---

# 代码评审接收

## 概述

代码评审需要技术评估，而非情感表演。

**核心原则：** 先验证再实施。有疑问先询问。技术正确性高于社交舒适。

## 响应模式

```
当接收到代码评审反馈时：

1. 阅读：完整阅读反馈，不做反应
2. 理解：用自己的话重述需求（或提问）
3. 验证：对照代码库实际情况检查
4. 评估：对该代码库来说技术上是否合理？
5. 回应：技术确认或有理有据的反驳
6. 实施：一次处理一项，每项都测试
```

## 禁止的回应

**绝不：**
- "您说得完全正确！"（明确违反 AGENTS.md）
- "说得好！" / "反馈很棒！"（表演性质）
- "我现在就实现"（验证之前）

**应该：**
- 重述技术需求
- 提出澄清问题
- 如果错误，用技术理由反驳
- 直接开始工作（行动 > 言语）

## 处理不明确的反馈

```
如果有任何项目不明确：
  停止 - 先不要实施任何内容
  就明确的项目询问澄清

原因：项目之间可能有关联。部分理解 = 错误实施。
```

**示例：**
```
您的人类伙伴："修复 1-6"
您理解 1,2,3,6。对 4,5 不明确。

❌ 错误：先实施 1,2,3,6，稍后再问 4,5
✅ 正确："我理解项目 1,2,3,6。需要先澄清 4 和 5 再 proceed。"
```

## 根据来源的处理方式

### 来自您的人类伙伴
- **可信** - 理解后实施
- **仍然要询问** 如果范围不明确
- **不做表演性质的认同**
- **直接行动** 或技术确认

### 来自外部评审者
```
实施之前：
  1. 检查：对该代码库来说技术上是否正确？
  2. 检查：会破坏现有功能吗？
  3. 检查：当前实施的缘由是什么？
  4. 检查：是否适用于所有平台/版本？
  5. 检查：评审者是否了解完整上下文？

如果建议似乎是错误的：
  用技术理由反驳

如果无法轻松验证：
  说明情况："我无法在没有 [X] 的情况下验证这一点。我应该 [调查/询问/继续] 吗？"

如果与您的人类伙伴先前的决定冲突：
  先停止并与您的人类伙伴讨论
```

**您的人类伙伴的规则：** "外部反馈 - 保持怀疑，但仔细检查"

## 针对"专业"功能的 YAGNI 检查

```
如果评审者建议"正确实现"：
  在代码库中 grep 实际使用情况

  如果未使用："此端点未被调用。删除它 (YAGNI)？"
  如果使用：那么正确实现
```

**您的人类伙伴的规则：** "你和评审者都向我汇报。如果我们不需要这个功能，就不要添加它。"

## 实施顺序

```
对于多项目反馈：
  1. 首先澄清任何不明确的内容
  2. 然后按此顺序实施：
     - 阻塞性问题（破坏功能、安全问题）
     - 简单修复（拼写错误、导入）
     - 复杂修复（重构、逻辑）
  3. 单独测试每个修复
  4. 验证没有回归
```

## 何时反驳

在以下情况下反驳：
- 建议破坏现有功能
- 评审者缺乏完整上下文
- 违反 YAGNI（未使用的功能）
- 对该技术栈技术上不正确
- 存在遗留/兼容性原因
- 与您的人类伙伴的架构决策冲突

**如何反驳：**
- 使用技术理由，而非防御性态度
- 提出具体问题
- 引用工作的测试/代码
- 如果是架构问题，涉及您的人类伙伴

**如果不舒服大声反驳的信号：** "Circle K 发生了奇怪的事情"

## 确认正确的反馈

当反馈是正确的时候：
```
✅ "已修复。[简要描述更改内容]"
✅ "发现得好 - [具体问题]。已在 [位置] 修复。"
✅ [直接修复并在代码中展示]

❌ "您说得完全正确！"
❌ "说得好！"
❌ "感谢您发现那个！"
❌ "感谢 [任何事情]"
❌ 任何感谢表达
```

**为什么不要感谢：** 行动说明一切。直接修复。代码本身就表明您听到了反馈。

**如果您发现自己正要写"谢谢"：** 删除它。陈述修复内容代替。

## 优雅地纠正您的反驳

如果您反驳了但错了：
```
✅ "您是对的 - 我检查了 [X]，它确实 [Y]。现在正在实施。"
✅ "验证了这一点，您是正确的。我最初的理解错了，因为 [原因]。正在修复。"

❌ 长篇道歉
❌ 为反驳辩护
❌ 过度解释
```

实事求是地陈述纠正，然后继续。

## 常见错误

| 错误 | 修复 |
|---------|-----|
| 表演性质的认同 | 陈述需求或直接行动 |
| 盲目实施 | 先对照代码库验证 |
| 批量处理但不测试 | 一次一个，每个都测试 |
| 假设评审者是对的 | 检查是否会破坏功能 |
| 避免反驳 | 技术正确性 > 舒适 |
| 部分实施 | 先澄清所有项目 |
| 无法验证但仍继续 | 说明限制，询问方向 |

## 真实示例

**表演性质的认同（差）：**
```
评审者："删除遗留代码"
❌ "您说得完全正确！让我删除那个..."
```

**技术验证（好）：**
```
评审者："删除遗留代码"
✅ "正在检查... 构建目标是 10.15+，此 API 需要 13+。为了向后兼容需要保留遗留代码。当前实现的 bundle ID 错误 - 是修复它还是放弃 13 之前的支持？"
```

**YAGNI（好）：**
```
评审者："使用数据库、日期过滤器、CSV 导出正确实现指标跟踪"
✅ "在代码库中 grep - 没有东西调用此端点。删除它 (YAGNI)？或者有我遗漏的用途？"
```

**不明确的项目（好）：**
```
您的人类伙伴："修复项目 1-6"
您理解 1,2,3,6。对 4,5 不明确。
✅ "理解 1,2,3,6。需要先澄清 4 和 5 再实施。"
```

## GitHub 线程回复

当回复 GitHub 上的内联评审评论时，在评论线程中回复 (`gh api repos/{owner}/{repo}/pulls/{pr}/comments/{id}/replies`)，而不是作为顶级 PR 评论。

## 底线

**外部反馈 = 需要评估的建议，不是必须遵循的命令。**

验证。质疑。然后实施。

不要表演性质的认同。始终保持技术严谨。
